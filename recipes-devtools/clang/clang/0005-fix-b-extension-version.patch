From 2e5b10011724d9606477025719a523bac12bfa85 Mon Sep 17 00:00:00 2001
From: "yilun.xie" <yilun.xie@starfivetech.com>
Date: Thu, 6 Jan 2022 09:39:08 +0800
Subject: [PATCH 05/24] fix  b extension version

---
 clang/lib/Basic/Targets/RISCV.cpp | 32 +++++++------------------------
 1 file changed, 7 insertions(+), 25 deletions(-)

diff --git a/clang/lib/Basic/Targets/RISCV.cpp b/clang/lib/Basic/Targets/RISCV.cpp
index 567f60087135..1b02af3bfb88 100644
--- a/clang/lib/Basic/Targets/RISCV.cpp
+++ b/clang/lib/Basic/Targets/RISCV.cpp
@@ -177,7 +177,7 @@ void RISCVTargetInfo::getTargetDefines(const LangOptions &Opts,
   }
 
   if (HasB) {
-    Builder.defineMacro("__riscv_b", "93000");
+    Builder.defineMacro("__riscv_b", "100000");
     Builder.defineMacro("__riscv_bitmanip");
   }
 
@@ -187,37 +187,19 @@ void RISCVTargetInfo::getTargetDefines(const LangOptions &Opts,
   }
 
   if (HasZba)
-    Builder.defineMacro("__riscv_zba", "93000");
+    Builder.defineMacro("__riscv_zba", "100000");
 
   if (HasZbb)
-    Builder.defineMacro("__riscv_zbb", "93000");
+    Builder.defineMacro("__riscv_zbb", "100000");
 
   if (HasZbc)
-    Builder.defineMacro("__riscv_zbc", "93000");
-
-  if (HasZbe)
-    Builder.defineMacro("__riscv_zbe", "93000");
-
-  if (HasZbf)
-    Builder.defineMacro("__riscv_zbf", "93000");
-
-  if (HasZbm)
-    Builder.defineMacro("__riscv_zbm", "93000");
-
-  if (HasZbp)
-    Builder.defineMacro("__riscv_zbp", "93000");
-
-  if (HasZbproposedc)
-    Builder.defineMacro("__riscv_zbproposedc", "93000");
-
-  if (HasZbr)
-    Builder.defineMacro("__riscv_zbr", "93000");
+    Builder.defineMacro("__riscv_zbc", "100000");
 
   if (HasZbs)
-    Builder.defineMacro("__riscv_zbs", "93000");
+    Builder.defineMacro("__riscv_zbs", "100000");
 
-  if (HasZbt)
-    Builder.defineMacro("__riscv_zbt", "93000");
+  if (HasZbproposedc)
+    Builder.defineMacro("__riscv_zbproposedc", "94000");
 
   if (HasZfh)
     Builder.defineMacro("__riscv_zfh", "1000");
-- 
2.33.1

